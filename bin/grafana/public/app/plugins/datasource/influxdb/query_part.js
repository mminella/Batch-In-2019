/*! grafana - v4.3.2 - 2017-05-31
 * Copyright (c) 2017 Torkel Ã–degaard; Licensed Apache-2.0 */

System.register(["lodash","app/core/components/query_part/query_part"],function(a,b){"use strict";function c(a){var b=n[a.type];if(!b)throw{message:"Could not find query part "+a.type};return new m.QueryPart(a,b)}function d(a){n[a.type]=new m.QueryPartDef(a),a.category.push(n[a.type])}function e(a,b){return b+' AS "'+a.params[0]+'"'}function f(a,b){return"*"===a.params[0]?"*":'"'+a.params[0]+'"'}function g(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.def.category===o.Aggregations)return void(a[c]=b);if(d.def.category===o.Selectors)return void(a[c]=b)}a.splice(1,0,b)}function h(a,b){var c;for(c=0;c<a.length;c++){var d=a[c];if(d.def.category===o.Math||d.def.category===o.Aliasing)break}a.splice(c,0,b)}function i(a,b){var c=a.length;if(c>0){if("math"===a[c-1].def.type)return void(a[c-1]=b);if("math"===a[c-2].def.type)return void(a[c-2]=b);if("alias"===a[c-1].def.type)return void a.splice(c-1,0,b)}a.push(b)}function j(a,b){var c=a.length;return c>0&&"alias"===a[c-1].def.type?void(a[c-1]=b):void a.push(b)}function k(a,b,d){var e=l.default.map(a,function(a){return c({type:a.def.type,params:l.default.clone(a.params)})});d.selectModels.push(e)}var l,m,n,o,p;b&&b.id;return{setters:[function(a){l=a},function(a){m=a}],execute:function(){n=[],o={Aggregations:[],Selectors:[],Transformations:[],Predictors:[],Math:[],Aliasing:[],Fields:[]},p=[],d({type:"field",addStrategy:k,category:o.Fields,params:[{type:"field",dynamicLookup:!0}],defaultParams:["value"],renderer:f}),d({type:"count",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"distinct",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"integral",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"mean",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"median",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"mode",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"sum",addStrategy:g,category:o.Aggregations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"derivative",addStrategy:h,category:o.Transformations,params:[{name:"duration",type:"interval",options:["1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["10s"],renderer:m.functionRenderer}),d({type:"spread",addStrategy:h,category:o.Transformations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"non_negative_derivative",addStrategy:h,category:o.Transformations,params:[{name:"duration",type:"interval",options:["1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["10s"],renderer:m.functionRenderer}),d({type:"difference",addStrategy:h,category:o.Transformations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"moving_average",addStrategy:h,category:o.Transformations,params:[{name:"window",type:"int",options:[5,10,20,30,40]}],defaultParams:[10],renderer:m.functionRenderer}),d({type:"cumulative_sum",addStrategy:h,category:o.Transformations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"stddev",addStrategy:h,category:o.Transformations,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"time",category:p,params:[{name:"interval",type:"time",options:["$__interval","1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["$__interval"],renderer:m.functionRenderer}),d({type:"fill",category:p,params:[{name:"fill",type:"string",options:["none","null","0","previous","linear"]}],defaultParams:["null"],renderer:m.functionRenderer}),d({type:"elapsed",addStrategy:h,category:o.Transformations,params:[{name:"duration",type:"interval",options:["1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["10s"],renderer:m.functionRenderer}),d({type:"holt_winters",addStrategy:h,category:o.Predictors,params:[{name:"number",type:"int",options:[5,10,20,30,40]},{name:"season",type:"int",options:[0,1,2,5,10]}],defaultParams:[10,2],renderer:m.functionRenderer}),d({type:"holt_winters_with_fit",addStrategy:h,category:o.Predictors,params:[{name:"number",type:"int",options:[5,10,20,30,40]},{name:"season",type:"int",options:[0,1,2,5,10]}],defaultParams:[10,2],renderer:m.functionRenderer}),d({type:"bottom",addStrategy:g,category:o.Selectors,params:[{name:"count",type:"int"}],defaultParams:[3],renderer:m.functionRenderer}),d({type:"first",addStrategy:g,category:o.Selectors,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"last",addStrategy:g,category:o.Selectors,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"max",addStrategy:g,category:o.Selectors,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"min",addStrategy:g,category:o.Selectors,params:[],defaultParams:[],renderer:m.functionRenderer}),d({type:"percentile",addStrategy:g,category:o.Selectors,params:[{name:"nth",type:"int"}],defaultParams:[95],renderer:m.functionRenderer}),d({type:"top",addStrategy:g,category:o.Selectors,params:[{name:"count",type:"int"}],defaultParams:[3],renderer:m.functionRenderer}),d({type:"tag",category:p,params:[{name:"tag",type:"string",dynamicLookup:!0}],defaultParams:["tag"],renderer:f}),d({type:"math",addStrategy:i,category:o.Math,params:[{name:"expr",type:"string"}],defaultParams:[" / 100"],renderer:m.suffixRenderer}),d({type:"alias",addStrategy:j,category:o.Aliasing,params:[{name:"name",type:"string",quote:"double"}],defaultParams:["alias"],renderMode:"suffix",renderer:e}),a("default",{create:c,getCategories:function(){return o}})}}});